#!/usr/bin/env bash
set -euo pipefail

# Optional version bump every commit if cargo-bump exists
if command -v cargo-bump >/dev/null 2>&1; then
  cargo-bump patch --allow-dirty --no-tag
  git add Cargo.toml || true
fi

cargo fmt --all
cargo clippy --all-targets --all-features -- -D warnings
cargo test --all-features
